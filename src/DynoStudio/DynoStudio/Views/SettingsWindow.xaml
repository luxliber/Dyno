<Window x:Class="Dyno.Forms.SettingsWindow" x:Name="Window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Width="700" SizeToContent="Height" Title="Dyno Studio Settings and Information"
        WindowStartupLocation="CenterScreen" Background="{DynamicResource DarkBackground}">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Themes/MetroDark/MetroDark.MSControls.Core.Implicit.xaml" />
                <ResourceDictionary Source="../Themes/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>


            <Style x:Key="FolderCheckBoxStyle" TargetType="CheckBox">
                <Setter Property="SnapsToDevicePixels" Value="true" />
                <Setter Property="OverridesDefaultStyle" Value="false" />
                <Setter Property="FocusVisualStyle" Value="{DynamicResource CheckBoxFocusVisual}" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="CheckBox">
                            <BulletDecorator Background="Transparent">
                                <BulletDecorator.Bullet>
                                    <Border x:Name="Border" VerticalAlignment="Center" HorizontalAlignment="Center"
                                            Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                                        <Path Width="12" Height="12" Stretch="Uniform" x:Name="CheckMark"
                                              Stroke="White" StrokeThickness="2" Data="M 0 4 L 2 7 L 7 0"
                                              Margin="0,0,0,5" />
                                    </Border>
                                </BulletDecorator.Bullet>
                            </BulletDecorator>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="false">
                                    <Setter TargetName="CheckMark" Property="Stroke" Value="Black" />
                                </Trigger>
                                <Trigger Property="IsChecked" Value="{x:Null}">
                                    <Setter TargetName="CheckMark" Property="Stroke" Value="Black" />
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter TargetName="Border" Property="Background"
                                            Value="{DynamicResource DarkBrush}" />
                                </Trigger>
                                <Trigger Property="IsPressed" Value="true">
                                    <Setter TargetName="Border" Property="Background"
                                            Value="{DynamicResource PressedBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>

    </Window.Resources>
    <TabControl Style="{DynamicResource MainTabControlStyle}" Margin="5">
        <TabItem Header="Settings" Style="{DynamicResource SettingsTabItemStyle}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid Margin="5" Grid.Row="0">
                    <Label Content="Dynamo workspaces and Dyno presets storage folders:" VerticalAlignment="Top" />
                    <Button Grid.Column="0" x:Name="AddButton" FontSize="16" VerticalContentAlignment="Center"
                            VerticalAlignment="Top" HorizontalAlignment="Right" Width="25" Height="25"
                            x:FieldModifier="public" Click="AddButton_OnClick">
                        <Path Data="M0.5,0 L0.5,1 M0,0.5 L1,0.5" Stretch="Fill" Stroke="White" StrokeThickness="1"
                              Width="10" Height="10" />
                    </Button>
                </Grid>
                <ListBox Margin="5" Grid.Row="1" x:Name="StorageFoldersListBox" MinHeight="300"
                         ItemsSource="{Binding StorageFoldersZip, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         Padding="5" VerticalAlignment="Stretch">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            <Setter Property="Padding" Value="0" />
                            <Setter Property="Margin" Value="0,0,0,5" />
                            <Setter Property="BorderThickness" Value="0" />
                        </Style>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border BorderThickness="0,0,0,1" BorderBrush="DimGray">
                                <Grid Height="25">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="30" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock VerticalAlignment="Center" Name="path" Margin="0" Padding="10,0,0,0"
                                               Text="{Binding Path}" />
                                    <Border Grid.Column="1" BorderThickness="1,0,0,0" BorderBrush="LightGray"
                                            HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <CheckBox Style="{StaticResource FolderCheckBoxStyle}" Tag="{Binding}"
                                                  IsChecked="{Binding Status}" BorderThickness="0" Width="29"
                                                  Height="29" />
                                    </Border>
                                    <Border Grid.Column="2" BorderThickness="1,0,0,0" BorderBrush="DimGray">
                                        <Button Cursor="Hand" Tag="{Binding}" Name="browse" Background="Transparent"
                                                BorderThickness="0" Click="Browse_OnClick">
                                            ...
                                        </Button>
                                    </Border>
                                    <Border Grid.Column="3" BorderThickness="1,0,0,0" BorderBrush="DimGray">
                                        <Button Cursor="Hand" Click="DeleteButtonOnClick" Tag="{Binding }" Name="delete"
                                                Background="Transparent" BorderThickness="0">
                                            <Path x:Name="Cross" Data="M0,0 L1,1 M0,1 L1,0" Stretch="Fill"
                                                  Stroke="White" StrokeThickness="1" Width="8" Height="8" />
                                        </Button>
                                    </Border>

                                </Grid>
                            </Border>

                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Grid.RowSpan="4">
                    <Button Margin="5" x:Name="ApplyButton" Content="OK" HorizontalAlignment="Right" Width="75"
                            x:FieldModifier="public" Height="23" VerticalAlignment="Bottom" IsDefault="True"
                            Click="ApplyButton_OnClick" />
                </StackPanel>
            </Grid>
        </TabItem>
        <TabItem Header="About" Style="{DynamicResource SettingsTabItemStyle}">
            <StackPanel Margin="0,0,2,0" Orientation="Vertical" RenderTransformOrigin="0.508,0.525">
                <Image HorizontalAlignment="Center" VerticalAlignment="Top" Source="../Images/about_single.png"
                       StretchDirection="DownOnly" Stretch="Fill" Height="39" Width="220" Margin="0,20,0,0" />
                <Label Padding="0,0,0,20" Content="{Binding Path=Version, ElementName=Window, Mode=OneWay}"
                       Foreground="OrangeRed" HorizontalAlignment="Center" Margin="86,0" FontFamily="Roboto Light" />


                <Image HorizontalAlignment="Center" VerticalAlignment="Top" Source="Images/prorubim.png" Stretch="Fill"
                       Width="41" Height="37" Margin="0" />

                <TextBlock TextAlignment="Center" Margin="0,0,0,0" Foreground="LightGray">

                    PRORUBIM site -
                    <Hyperlink Foreground="DeepSkyBlue" NavigateUri="http://prorubim.com/en/" TargetName="_top"
                               RequestNavigate="Hyperlink_OnRequestNavigate">
                        prorubim.com
                    </Hyperlink>
                </TextBlock>
                <TextBlock TextAlignment="Center" Foreground="LightGray">
                    App page -
                    <Hyperlink Foreground="DeepSkyBlue" NavigateUri="http://prorubim.com/en/tools/dyno_studio/"
                               TargetName="_top" RequestNavigate="Hyperlink_OnRequestNavigate">
                        prorubim.com/en/tools/dyno_studio
                    </Hyperlink>
                </TextBlock>
                <TextBlock TextAlignment="Center" Foreground="LightGray">
                    EULA page -
                    <Hyperlink Foreground="DeepSkyBlue" NavigateUri="http://prorubim.com/en/tools/dyno_studio/eula/"
                               TargetName="_top" RequestNavigate="Hyperlink_OnRequestNavigate">
                        prorubim.com/en/tools/dyno_studio/eula
                    </Hyperlink>
                </TextBlock>

                <Label Padding="0,0,0,0" Content="Email - lobanov.a@prorubim.com" Foreground="LightGray"
                       HorizontalAlignment="Center" Margin="86,0" />

                <Image HorizontalAlignment="Center" VerticalAlignment="Top" Source="Images/handmade.png"
                       Stretch="Uniform" Opacity="0.5" Width="140" Margin="10" StretchDirection="DownOnly" />
                <Label Padding="0,0,0,10" Content="© Alexey Lobanov (PRORUBIM LLC) 2017" FontSize="11"
                       Foreground="Gray" HorizontalAlignment="Center" Margin="0" />

            </StackPanel>
        </TabItem>
    </TabControl>

</Window>