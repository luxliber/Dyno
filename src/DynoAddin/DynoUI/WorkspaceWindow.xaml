<Window x:Class="DynoUI.WorkspaceWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      
        Title="Dyno Browser" Height="323" Width="535">
  
    <Grid x:FieldModifier="public" x:Name="inner" Background="White">
        <Grid x:FieldModifier="public" x:Name="Master">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition   MinHeight="50" />
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!--<ToolBarPanel Margin="3" Orientation="Horizontal" Grid.Row="0" HorizontalAlignment="Left"></ToolBarPanel> -->
            <TextBox Grid.Row="1" x:Name="Search" x:FieldModifier="public" Margin="10,0,10,5">
                <TextBox.Template>
                    <ControlTemplate TargetType="TextBox">
                        <StackPanel Orientation="Vertical">
                            <Grid Margin="7,5,7,0">
                                <ScrollViewer x:Name="PART_ContentHost" />
                                <TextBlock x:Name="WatermarkText" Margin="5,0,0,0" FontStyle="Italic" Text="Search and Filter" Foreground="Gray" HorizontalAlignment="Left" VerticalAlignment="Center" Visibility="Collapsed" IsHitTestVisible="False"/>
                                <Button HorizontalAlignment="Right" Width="20" Background="Transparent" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" BorderBrush="Transparent" Foreground="Gray" Click="ButtonBase_OnClick">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <Border Cursor="Hand" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent">
                                                <Path x:Name="ButtonPath"
                                          Stroke="{TemplateBinding Foreground}"
                                          StrokeThickness="1"
                                          StrokeStartLineCap="Square"
                                          StrokeEndLineCap="Square"
                                          Stretch="None" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                    <Path.Data>
                                                        <PathGeometry>
                                                            <PathGeometry.Figures>
                                                                <PathFigure StartPoint="0,0">
                                                                    <LineSegment Point="8,8"/>
                                                                </PathFigure>
                                                                <PathFigure StartPoint="0,8">
                                                                    <LineSegment Point="8,0"/>
                                                                </PathFigure>
                                                            </PathGeometry.Figures>
                                                        </PathGeometry>
                                                    </Path.Data>
                                                </Path>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>
                            <Border Height="5" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0,0,0,1"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>

                                    <Condition Property="Text" Value=""/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Visibility" TargetName="WatermarkText" Value="Visible"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>

                                    <Condition Property="Text" Value="{x:Null}"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Visibility" TargetName="WatermarkText" Value="Visible"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </TextBox.Template>
            </TextBox>
            <TreeView x:Name="Tv" x:FieldModifier="public" Grid.Row="2" BorderBrush="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" ItemsSource="{Binding Root.Childs, Mode=OneWay, NotifyOnSourceUpdated=True, BindsDirectlyToSource=True}">
                <TreeView.Resources>

                    <SolidColorBrush
            x:Key="{x:Static SystemColors.HighlightBrushKey}" 
            Color="#dddddd" />
                    <SolidColorBrush
            x:Key="{x:Static SystemColors.ControlBrushKey}" 
            Color="Transparent" />
                    <SolidColorBrush
            x:Key="{x:Static SystemColors.HighlightTextBrushKey}" 
            Color="Black" />
                </TreeView.Resources>

                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate ItemsSource="{Binding Childs}" >
                        <Grid Name="innerGrid">
                            <StackPanel Name="group" Orientation="Horizontal" Visibility="Collapsed">
                                <Path ToolTip="Folder" Margin="4,2,2,2" Width="10" Height="10" Stretch="Fill" Stroke="Black" StrokeThickness="1" StrokeLineJoin="Miter" SnapsToDevicePixels="True"
                                      Data="M0,100 L0,0 L30,0 L50,20 L100,20 L100,100 Z"/>
                                <Path ToolTip="Button on ribbon panel" x:Name="IsGroupButtonExists" Margin="4,2,4,2" Width="4" Height="12" Fill="{Binding RibbonButtonColorBrush}" Stretch="Fill" Visibility="Visible"
                                  Data="M0,0 L0,100 L20,100 L20,0 Z"/>
                                <TextBlock Name="GroupName"  FontWeight="Bold" FontSize="12"  Text="{Binding Name}"/>
                            </StackPanel>

                            <Border  Name="preset" Background="{Binding StatusColor}" Padding="1" Visibility="Collapsed" >
                                <StackPanel Orientation="Horizontal">
                                    <Path ToolTip="Dyno Studio UI Form" x:Name="IsFormExists" Margin="4,2,2,2" Width="10" Height="10" Stretch="Fill" Fill="Black"
                                  Data="M0,0 L0,100 L100,100 L100,0 M10,20 L10,90 L90,90 L90,20 Z"/>
                                    <Path ToolTip="Preset" x:Name="IsPresetExists" Margin="4,2,2,2" Width="10" Height="10" Stretch="Fill" Fill="Black"
                                  Data="M0,0 L0,20 L100,20 L100,0 M0,40 L0,60 L100,60 L100,40 M0,80 L0,100 L100,100 L100,80 Z"/>
                                    <Path ToolTip="Button on ribbon panel" x:Name="IsButtonExists" Margin="4,2,4,2" Width="4" Height="12" Fill="{Binding RibbonButtonColorBrush}" Stretch="Fill" Visibility="Visible"
                                  Data="M0,0 L0,100 L20,100 L20,0 Z"/>
                                    <TextBlock Text="{Binding Workspace.Name}" ToolTip="{Binding Desc}" />
                                    <TextBlock x:Name="leftBrace" Text=" (" />
                                    <TextBlock Text="{Binding DisplayName}" Foreground="#006fbd" ToolTip="{Binding Desc}"/>
                                    <TextBlock x:Name="rightBrace" Text=")" />
                                    <TextBlock x:Name="star" Visibility="Hidden" Foreground="Gray" Margin="0,0,0,0" VerticalAlignment="Top" ToolTip="Modofied" FontSize="12">
                                        *
                                    </TextBlock>
                                    <TextBlock x:Name="version" Foreground="Gray" Margin="5,0,5,0" FontSize="9">
                                        D<Run Text="{Binding Workspace.DynamoVersion}"/>
                                    </TextBlock>
                                    <!--  <TextBlock FontStyle="Italic" Foreground="DimGray" TextTrimming="CharacterEllipsis" Text="   Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut a" />-->
                                </StackPanel>
                            </Border>

                            <Border  Name="playlist" Background="{Binding StatusColor}" Padding="1" Visibility="Collapsed" >
                                <StackPanel Orientation="Horizontal">
                                    <!--<Path ToolTip="Playlist" Margin="4,2,2,2" Width="10" Height="10" Stretch="Fill" Fill="Black"/> -->
                                    <Path ToolTip="Playlist" Margin="4,2,2,2" Width="10" Height="10" Stretch="Fill" Stroke="Black" StrokeThickness="1" SnapsToDevicePixels="True" StrokeLineJoin="Miter"
                                          Data="M0,100 L0,0 L80,50 L0,100 Z"/>
                                    <Path ToolTip="Button on ribbon panel" x:Name="IsPlaylistButtonExists" Margin="4,2,4,2" Width="4" Height="12" Fill="{Binding RibbonButtonColorBrush}" Stretch="Fill" Visibility="Visible"
                                          Data="M0,0 L0,100 L20,100 L20,0 Z"/>
                                    <TextBlock FontWeight="Bold" Text="{Binding Name}" ToolTip="{Binding Desc}" />
                                </StackPanel>
                            </Border>

                            <StackPanel Name="parameter"  Orientation="Horizontal"  Visibility="Collapsed" >
                                <Image x:Name="img" Source="Images/par.png" Margin="0,0,10,0" VerticalAlignment="Top" />
                                <TextBlock  x:Name="name" Text="{Binding Path=Name}" FontStyle="Italic" FontSize="11" ToolTip="{Binding Path=Desc}"
                                               Foreground="#1a6500" />
                                <TextBlock Text=" : " FontStyle="Italic" FontSize="11" Foreground="#1a6500" />
                                <TextBlock x:Name="val" Text="{Binding Path=Value}" ToolTip="{Binding Path=Value}" FontStyle="Italic" FontSize="11" MaxHeight="100" TextWrapping="WrapWithOverflow" HorizontalAlignment="Stretch"
                                               Foreground="#1a6500" Background="White" FontWeight="Bold" Padding="5,0,5,0" Margin="2,0,0,0" >
                                </TextBlock>
                                <!--    <TextBlock FontStyle="Italic" Foreground="DarkGray" FontSize="10" TextTrimming="CharacterEllipsis" Text="   Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut a" />-->

                            </StackPanel>
                            <Grid x:Name="values" Margin="20,0,0,0">
                                <Border HorizontalAlignment="Stretch" BorderThickness="0,1,0,0" BorderBrush="LightGray"></Border>
                                <TextBlock Padding="0,3,0,3" ToolTip="{Binding}"  Text="{Binding}" FontStyle="Italic" FontSize="10" Foreground="DeepPink" TextWrapping="Wrap"/>
                            </Grid>
                        </Grid>
                        <HierarchicalDataTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsShowDynamoFileVersion}" Value="False">
                                <Setter TargetName="version" Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsProject}" Value="true">

                                <Setter TargetName="GroupName" Property="Foreground" Value="#006fbd" />
                                <Setter TargetName="GroupName" Property="FontStyle" Value="Italic" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag}" Value="group">
                                <Setter TargetName="group" Property="Visibility" Value="Visible" />
                                <Setter TargetName="values" Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag}" Value="preset">
                                <Setter TargetName="preset" Property="Visibility" Value="Visible" />
                                <Setter TargetName="values" Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag}" Value="parameter">
                                <Setter TargetName="parameter" Property="Visibility" Value="Visible" />
                                <Setter TargetName="values" Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag}" Value="playlist">
                                <Setter TargetName="playlist" Property="Visibility" Value="Visible" />
                                <Setter TargetName="values" Property="Visibility" Value="Collapsed" />
                            </DataTrigger>


                            <DataTrigger Binding="{Binding DisplayName}" Value="">
                                <Setter TargetName="leftBrace" Property="Visibility" Value="Collapsed"/>
                                <Setter TargetName="rightBrace" Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsChanged}" Value="true">
                                <Setter TargetName="star" Property="Visibility" Value="Visible"/>
                            </DataTrigger>


                            <DataTrigger Binding="{Binding Format}" Value="output">
                                <Setter TargetName="name" Property="Foreground" Value="DeepPink"/>
                                <Setter TargetName="val" Property="Foreground" Value="DeepPink"/>
                                <Setter TargetName="img" Property="Source" Value="Images/res.png"/>
                            </DataTrigger>

                            <Trigger SourceName="val" Property="IsMouseOver" Value="True">
                                <Setter TargetName="val" Property="Background" Value="LightGray"/>
                            </Trigger>

                            <DataTrigger Binding="{Binding Path=IsForm, Mode=OneWay}" Value="False">
                                <Setter TargetName="IsFormExists" Property="Fill" Value="#ffc0c0c0"/>
                            </DataTrigger>

                            <DataTrigger Binding="{Binding Path=Name, Mode=OneWay}" Value="">
                                <Setter TargetName="IsPresetExists" Property="Fill" Value="#ffc0c0c0"/>
                            </DataTrigger>


                        </HierarchicalDataTemplate.Triggers>
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>


            </TreeView>
            <Grid x:Name="Update" VerticalAlignment="Bottom" UseLayoutRounding="False" Background="#FF73D685" x:FieldModifier="public" Grid.Row="3" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Label x:Name="UpdateTextBox" x:FieldModifier="public"  Content="A new version is avaliable" Grid.Column="0"/>
                <Button x:Name="Download" Content="Download" HorizontalAlignment="Right" Padding="5,0,5,0" Grid.Column="1" BorderBrush="{x:Null}"  Margin="2" x:FieldModifier="public">
                    <Button.Background>
                        <SolidColorBrush Color="White" Opacity="0.6"/>
                    </Button.Background>
                </Button>
                <Button Content="Hide" HorizontalAlignment="Right" Padding="5,0,5,0" Grid.Column="2" BorderBrush="{x:Null}" Margin="2" Click="Button_Click">
                    <Button.Background>
                        <SolidColorBrush Color="White" Opacity="0.6"/>
                    </Button.Background>
                </Button>
            </Grid>
        </Grid>
    </Grid>

</Window>